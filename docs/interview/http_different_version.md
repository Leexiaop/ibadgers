---
title: 简述HTTP不同版本的区别？
group: HTTP
toc: content
---

HTTP 是浏览器之间的通信协议，1991 年正式诞生；

### http 0.9 版本

这是 http 的最早版本，该协议的作用是传输超文本内容 HTML。就是简单的客户端发起一
个 GET+请求的文件路径请求，服务端收到请求后返回一个 ASCII 字符流编码的 HTML 文档
。验证了 web 服务的可行性。特点：

- 只支持 get 请求
- 只支持传输 html 的数据格式
- 无状态，客户端发起请求，服务端接收到请求并返回结果给客户端后，客户端和服务端
  的连接会马上断开缺点：
- 只支持单一的 get 请求
- 只支持服务端返回 html

### http1.0 版本

http0.9 版本只能传输简单的 html 文档已经不能满足当时的需求，所以在 1996 年发布了
http1.0 版本，其主要的更新有以下几点：

- 支持了 get、post、head
- 可以传输的数据不再局限于文本。其中最核心的改变是增加了头部设定，头部内容以键
  值对的形式设置。请求头部通过 Accept 字段来告诉服务端可以接收的文件类型，响应
  头部再通过 Content-Type 字段来告诉浏览器返回文件的类型。头部字段不仅用于解决
  不同类型文件传输的问题，也可以实现其他很多功能如缓存、认证信息等
- 新增状态码、缓存等
- 引入协议版本号
- 引入 HEADER 的概念，让 http 处理请求和响应更加灵活缺点：
- 一个 TCP 链接只能发送一个请求，每次通信都需要经历建立连接、传输数据和断开连
  接三个阶段

### http1.1 版本

为了解决 http1.0 版本一个 TCP 只能发送一次请求的问题 http1.1 版本诞生，这也是到
目前为止使用最多的版本。

- 长连接：引入了 TCP 连接复用，既一个 TCP 默认不关闭，可以被多次请求复用
- 并发连接：对于一个域名的请求允许分配多个长连接
- 引入管道机制：一个 TCP 连接，可以同时发送多个请求
- 增加了 PUT、DELETE、OPTIONS、PATCH 等新的方法
- 新增缓存字段（cache-control E-tag）
- 请求头中引入了 range 字段，支持断点续传
- 允许响应数据分块（chunked），利于传输大文件；自此之后，这就形成了一个标准，
  浏览器，服务器必须严格遵守。

缺点：

- 会造成队头阻塞问题（虽然同一个 TCP 可以同时发送多个请求，但是服务端还是会一
  个一个请求进行处理进行返回，如果上一个返回延迟，会阻塞后面的流程）

### http2.0 版本

为解决 http1.1 的缺陷，2015 年 http2.0 发布：

- 传输数据的方式改为二进制传输，不再使用 ASCII 编码传输，这样提高了传输的效率
  ，客户端在发送请求时会将每个请求的内容封装成不同的带有编号的二进制帧
  （Frame），然后将这些帧同时发送给服务端。服务端接收到数据之后，会将相同编号
  的帧合并为完整的请求信息。同样，服务端返回结果、客户端接收结果也遵循这个帧的
  拆分与组合的过程。对于同一个域，客户端只需要与服务端建立一个连接即可完成通信
  需求。
- 多路复用（一个 tcp 请求可以发送多个请求），废弃了 http1.1 的管道机制
- 使用专用的算法，实现头部压缩，减少数据量的传输
- 允许服务端主动向客户端推送数据
- 头部字段全部改为小写；引入了伪头部的概念，出现在头部字段之前，以冒号开头
- 增强了安全性，“事实上”要求加密通信缺点：

- TCP 链接耗时较长（3 次握手 4 次挥手）
- 一个 tcp 中如果有丢包现象，那么整个 tcp 就需要等待续传
- 连接迁移需要重新连接：一个 TCP 连接是由源 IP 地址、源端口、目标 IP 地址以及
  目标端口来确定的。这表示如果端口或者 IP 地址发生变动，就需要重新让 TCP 和
  TLS 进行连接。这不适于设备切换网络的场景。

### http3.0 版本

http3.0 在 2022 年 6 月发布，和 http2.0 有了很大的不同：

- 基于谷歌的 Quic,底层传输是基于 UDP 协议，其不关心数据包的顺序或者数据包丢失
  ，但是 QUIC 会保证数据包的可靠性，每个数据包都会有一个唯一标识，当某个
  stream 的一个数据包丢失。这个 stream 的其他数据包即使到达了 HTTP，也不会被读
  取，直到 QUIC 重传丢失的数据。
- 连接建立更快：QUIC 内部数据帧中会携带 TLS 里的信息。并且 QUIC 不需要像
  HTTP/2 通过 TCP+TLS 握手，握手的目的在于确认双方的连接 ID。因此 QUIC 可以同
  时完成连接建立与加密密钥。甚至它在第二次连接时，应用数据包可以与 QUIC 握手信
  息一并发送。
- 支持连接迁移：QUIC 协议没有用 IP 地址和端口来确定连接，而是通过连接 ID 来标
  记通信两端，即使设备的网络发生变化后，导致 IP 地址变化，只要仍保有上下文信息
  （例如连接 ID、TLS 信息），就可以无缝复用原连接
